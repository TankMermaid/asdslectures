<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="John D. Storey" />
  <title>QCB 508 – Week 3</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="libs/reveal.js-3.3.0.1/css/reveal.css"/>



<link rel="stylesheet" href="libs/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>


<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <link href="libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
</head>
<body>
<style type="text/css">
p { 
  text-align: left; 
  }
.reveal pre code { 
  color: #000000; 
  background-color: rgb(240,240,240);
  font-size: 1.15em;
  border:none; 
  }
.reveal section img { 
  background:none; 
  border:none; 
  box-shadow:none;
  height: 500px;
  }
}
</style>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">QCB 508 – Week 3</h1>
    <h2 class="author">John D. Storey</h2>
    <h3 class="date">Spring 2017</h3>
</section>

<section><section id="section" class="titleslide slide level1"><h1><img src="images/howto.jpg"></img></h1></section></section>
<section><section id="exploratory-data-analysis" class="titleslide slide level1"><h1>Exploratory Data Analysis</h1></section><section id="what-is-eda" class="slide level2">
<h2>What is EDA?</h2>
<p>Exploratory data analysis (EDA) is the process of analzying data to uncover their key features.</p>
<p>John Tukey pioneered this framework, writing a seminal book on the topic (called <em>Exploratory Data Analysis</em>).</p>
<p>EDA involves calculating numerical summaries of data, visualizing data in a variety of ways, and considering interesting data points.</p>
<p>Before any model fitting is done to data, some exploratory data analysis should always be performed.</p>
<p><em>Data science seems to focus much more on EDA than traditional statistics.</em></p>
</section><section id="descriptive-statistics-examples" class="slide level2">
<h2>Descriptive Statistics Examples</h2>
<ul>
<li><p>Facebook’s <a href="https://www.facebook.com/note.php?note_id=469716398919">Visualizing Friendships</a> (side note: <a href="http://flowingdata.com/2010/12/13/facebook-worldwide-friendships-mapped/">a discussion</a>)</p></li>
<li><p><a href="https://www.youtube.com/watch?v=RUwS1uAdUcI&amp;t=3m22s&amp;version=3">Hans Rosling: Debunking third-world myths with the best stats you’ve ever seen</a></p></li>
<li><p>Flowing Data’s <a href="http://flowingdata.com/2015/12/15/a-day-in-the-life-of-americans/">A Day in the Life of Americans</a></p></li>
</ul>
</section><section id="components-of-eda" class="slide level2">
<h2>Components of EDA</h2>
<p>EDA involves calculating quantities and visualizing data for:</p>
<ul>
<li>Checking the <em>n</em>’s</li>
<li>Checking for missing data</li>
<li>Characterizing the distributional properties of the data</li>
<li>Characterizing relationships among variables and observations</li>
<li>Dimension reduction</li>
<li>Model formulation</li>
<li>Hypothesis generation</li>
</ul>
<p>… and there are possible many more activities one can do.</p>
</section><section id="r4ds-workflow" class="slide level2">
<h2><em>R4DS</em> Workflow</h2>
<p>Which of the following components of the <em>R4DS</em> workflow involve EDA?</p>
<ol type="1">
<li>Import</li>
<li>Tidy</li>
<li>Transform <span class="math inline">\(\leftrightarrow\)</span> Visualize <span class="math inline">\(\leftrightarrow\)</span> Model (<em>iterate</em>)</li>
<li>Communicate</li>
</ol>
</section></section>
<section><section id="data-sets" class="titleslide slide level1"><h1>Data Sets</h1></section><section id="data-mtcars" class="slide level2">
<h2>Data <code>mtcars</code></h2>
<p>Load the <code>mtcars</code> data set:</p>
<pre class="r"><code>&gt; library(&quot;tidyverse&quot;) # why load tidyverse?
&gt; data(&quot;mtcars&quot;, package=&quot;datasets&quot;)
&gt; mtcars &lt;- as_tibble(mtcars)
&gt; head(mtcars)
# A tibble: 6 × 11
    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  21.0     6   160   110  3.90 2.620 16.46     0     1     4
2  21.0     6   160   110  3.90 2.875 17.02     0     1     4
3  22.8     4   108    93  3.85 2.320 18.61     1     1     4
4  21.4     6   258   110  3.08 3.215 19.44     1     0     3
5  18.7     8   360   175  3.15 3.440 17.02     0     0     3
6  18.1     6   225   105  2.76 3.460 20.22     1     0     3
# ... with 1 more variables: carb &lt;dbl&gt;</code></pre>
</section><section id="data-mpg" class="slide level2">
<h2>Data <code>mpg</code></h2>
<p>Load the <code>mpg</code> data set:</p>
<pre class="r"><code>&gt; data(&quot;mpg&quot;, package=&quot;ggplot2&quot;)
&gt; head(mpg)
# A tibble: 6 × 11
  manufacturer model displ  year   cyl      trans   drv   cty
         &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;      &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
1         audi    a4   1.8  1999     4   auto(l5)     f    18
2         audi    a4   1.8  1999     4 manual(m5)     f    21
3         audi    a4   2.0  2008     4 manual(m6)     f    20
4         audi    a4   2.0  2008     4   auto(av)     f    21
5         audi    a4   2.8  1999     6   auto(l5)     f    16
6         audi    a4   2.8  1999     6 manual(m5)     f    18
# ... with 3 more variables: hwy &lt;int&gt;, fl &lt;chr&gt;, class &lt;chr&gt;</code></pre>
</section><section id="data-diamonds" class="slide level2">
<h2>Data <code>diamonds</code></h2>
<p>Load the <code>diamonds</code> data set:</p>
<pre class="r"><code>&gt; data(&quot;diamonds&quot;, package=&quot;ggplot2&quot;)
&gt; head(diamonds)
# A tibble: 6 × 10
  carat       cut color clarity depth table price     x     y
  &lt;dbl&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;ord&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1  0.23     Ideal     E     SI2  61.5    55   326  3.95  3.98
2  0.21   Premium     E     SI1  59.8    61   326  3.89  3.84
3  0.23      Good     E     VS1  56.9    65   327  4.05  4.07
4  0.29   Premium     I     VS2  62.4    58   334  4.20  4.23
5  0.31      Good     J     SI2  63.3    58   335  4.34  4.35
6  0.24 Very Good     J    VVS2  62.8    57   336  3.94  3.96
# ... with 1 more variables: z &lt;dbl&gt;</code></pre>
</section><section id="data-gapminder" class="slide level2">
<h2>Data <code>gapminder</code></h2>
<p>Load the <code>gapminder</code> data set:</p>
<pre class="r"><code>&gt; library(&quot;gapminder&quot;)
&gt; data(&quot;gapminder&quot;, package=&quot;gapminder&quot;)
&gt; gapminder &lt;- as_tibble(gapminder)
&gt; head(gapminder)
# A tibble: 6 × 6
      country continent  year lifeExp      pop gdpPercap
       &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 Afghanistan      Asia  1952  28.801  8425333  779.4453
2 Afghanistan      Asia  1957  30.332  9240934  820.8530
3 Afghanistan      Asia  1962  31.997 10267083  853.1007
4 Afghanistan      Asia  1967  34.020 11537966  836.1971
5 Afghanistan      Asia  1972  36.088 13079460  739.9811
6 Afghanistan      Asia  1977  38.438 14880372  786.1134</code></pre>
</section></section>
<section><section id="numerical-summaries-of-data" class="titleslide slide level1"><h1>Numerical Summaries of Data</h1></section><section id="useful-summaries" class="slide level2">
<h2>Useful Summaries</h2>
<ul>
<li><p><strong>Center</strong>: mean, median, mode</p></li>
<li><p><strong>Quantiles</strong>: percentiles, five number summaries</p></li>
<li><p><strong>Spread</strong>: standard deviation, variance, interquartile range</p></li>
<li><p><strong>Outliers</strong></p></li>
<li><p><strong>Shape</strong>: skewness, kurtosis</p></li>
<li><p><strong>Concordance</strong>: correlation, quantile-quantile plots</p></li>
</ul>
</section><section id="measures-of-center" class="slide level2">
<h2>Measures of Center</h2>
<p>Suppose we have data points <span class="math inline">\(x_1, x_2, \ldots, x_n\)</span>.</p>
<p><strong>Mean</strong>: <span class="math display">\[\overline{x} = \frac{x_1 + x_2 + \cdots + x_n}{n}\]</span></p>
<p><strong>Median</strong>: Order the points <span class="math inline">\(x_{(1)} \leq x_{(2)} \leq \cdots \leq x_{(n)}\)</span>. The median is the middle value:<br />
- <span class="math inline">\(x_{((n+1)/2)}\)</span> if <span class="math inline">\(n\)</span> is odd<br />
- <span class="math inline">\((x_{(n/2)} + x_{(n/2+1)})/2\)</span> if <span class="math inline">\(n\)</span> is even</p>
<p><strong>Mode</strong>: The most frequently repeated value among the data (if any). If there are ties, then there is more than one mode.</p>
</section><section id="mean-median-and-mode-in-r" class="slide level2">
<h2>Mean, Median, and Mode in R</h2>
<p>Let’s calculate these quantities in R.</p>
<pre class="r"><code>&gt; mean(mtcars$mpg)
[1] 20.09062
&gt; median(mtcars$mpg)
[1] 19.2
&gt; 
&gt; sample_mode &lt;- function(x) {
+   as.numeric(names(which(table(x) == max(table(x)))))
+ }
&gt; 
&gt; sample_mode(round(mtcars$mpg))
[1] 15 21</code></pre>
<p>It appears there is no R base function for calculating the mode.</p>
</section><section id="quantiles-and-percentiles" class="slide level2">
<h2>Quantiles and Percentiles</h2>
<p>The <span class="math inline">\(p\)</span>th <strong>percentile</strong> of <span class="math inline">\(x_1, x_2, \ldots, x_n\)</span> is a number such that <span class="math inline">\(p\)</span>% of the data are less than this number.</p>
<p>The 25th, 50th, and 75th percentiles are called 1st, 2nd, and 3rd “quartiles”, respectively. These are sometimes denoted as Q1, Q2, and Q3. The median is the 50th percentile aka the 2nd quartile aka Q2.</p>
<p>In general, <span class="math inline">\(q\)</span>-<strong>quantiles</strong> are cut points that divide the data into <span class="math inline">\(q\)</span> approximately equally sized groups. The cut points are the percentiles <span class="math inline">\(1/q, 2/q, \ldots, (q-1)/q.\)</span></p>
</section><section id="five-number-summary" class="slide level2">
<h2>Five Number Summary</h2>
<p>The “five number summary” is the minimum, the three quartiles, and the maximum. This can be calculated via <code>fivenum()</code> and <code>summary()</code>. <a href="https://chemicalstatistician.wordpress.com/2013/08/12/exploratory-data-analysis-the-5-number-summary-two-different-methods-in-r-2/">They can produce different values.</a> Finally, <code>quantile()</code> extracts any set of percentiles.</p>
<pre class="r"><code>&gt; fivenum(mtcars$mpg)
[1] 10.40 15.35 19.20 22.80 33.90
&gt; summary(mtcars$mpg)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  10.40   15.42   19.20   20.09   22.80   33.90 
&gt; 
&gt; quantile(mtcars$mpg, prob=seq(0, 1, 0.25))
    0%    25%    50%    75%   100% 
10.400 15.425 19.200 22.800 33.900 </code></pre>
</section><section id="measures-of-spread" class="slide level2">
<h2>Measures of Spread</h2>
<p>The variance, standard deviation (SD), and interquartile range (IQR) measure the “spread” of the data.</p>
<p><strong>Variance</strong>: <span class="math display">\[s^2 = \frac{\sum_{i=1}^n \left(x_i - \overline{x}\right)^2}{n-1}\]</span></p>
<p><strong>Standard Deviation</strong>: <span class="math inline">\(s = \sqrt{s^2}\)</span></p>
<p><strong>Iterquartile Range</strong>: IQR <span class="math inline">\(=\)</span> Q3 <span class="math inline">\(-\)</span> Q1</p>
<p>The SD and IQR have the same units as the observed data, but the variance is in squared units.</p>
</section><section id="variance-sd-and-iqr-in-r" class="slide level2">
<h2>Variance, SD, and IQR in R</h2>
<p>Variance:</p>
<pre class="r"><code>&gt; var(mtcars$mpg)
[1] 36.3241</code></pre>
<p>Standard deviation:</p>
<pre class="r"><code>&gt; sd(mtcars$mpg)
[1] 6.026948</code></pre>
<p>Interquartile range:</p>
<pre class="r"><code>&gt; IQR(mtcars$mpg)
[1] 7.375
&gt; diff(fivenum(mtcars$mpg)[c(2,4)])
[1] 7.45</code></pre>
</section><section id="identifying-outliers" class="slide level2">
<h2>Identifying Outliers</h2>
<p>An <strong>outlier</strong> is an unusual data point. Outliers can be perfectly valid but they can also be due to errors (as can non-outliers).</p>
<p>One must define what is meant by an outlier.</p>
<p>One definition is a data point that less than Q1 or greater than Q3 by 1.5 <span class="math inline">\(\times\)</span> IQR or more.</p>
<p>Another definition is a data point whose difference from the mean is greater than 3 <span class="math inline">\(\times\)</span> SD or more. For Normal distributed data (bell curve shaped), the probability of this is less than 0.27%.</p>
</section><section id="application-to-mtcars-data" class="slide level2">
<h2>Application to <code>mtcars</code> Data</h2>
<pre class="r"><code>&gt; sd_units &lt;- abs(mtcars$wt - mean(mtcars$wt))/sd(mtcars$wt)
&gt; sum(sd_units &gt; 3)
[1] 0
&gt; max(sd_units)
[1] 2.255336
&gt; 
&gt; iqr_outlier_cuts &lt;- fivenum(mtcars$wt)[c(2,4)] + 
+       c(-1.5, 1.5)*diff(fivenum(mtcars$wt)[c(2,4)])
&gt; sum(mtcars$wt &lt; iqr_outlier_cuts[1] | 
+     mtcars$wt &gt; iqr_outlier_cuts[2])
[1] 2</code></pre>
</section></section>
<section><section id="data-visualization-basics" class="titleslide slide level1"><h1>Data Visualization Basics</h1></section><section id="plots" class="slide level2">
<h2>Plots</h2>
<ul>
<li>Single variables:
<ul>
<li>Barplot</li>
<li>Boxplot</li>
<li>Histogram</li>
<li>Density plot</li>
</ul></li>
<li>Two or more variables:
<ul>
<li>Side-by-Side Boxplots</li>
<li>Stacked Barplot</li>
<li>Scatterplot</li>
</ul></li>
</ul>
</section><section id="r-base-graphics" class="slide level2">
<h2>R Base Graphics</h2>
<ul>
<li>We’ll first plodding through “R base graphics”, which means graphics functions that come with R.<br />
</li>
<li>By default they are very simple. However, they can be customized <em>a lot</em>, but it takes <em>a lot</em> of work.</li>
<li>Also, the syntax varies significantly among plot types and some think the syntax is not user-friendly.</li>
<li>We will consider a very highly used graphics package next week, called <code>ggplot2</code> that provides a “grammar of graphics”. It hits a sweet spot of “flexibility vs. complexity” for many data scientists.</li>
</ul>
</section><section id="read-the-documentation" class="slide level2">
<h2>Read the Documentation</h2>
<p>For all of the plotting functions covered below, read the help files.</p>
<pre class="r"><code>&gt; ?barplot
&gt; ?boxplot
&gt; ?hist
&gt; ?density
&gt; ?plot
&gt; ?legend</code></pre>
</section><section id="barplot" class="slide level2">
<h2>Barplot</h2>
<pre class="r"><code>&gt; cyl_tbl &lt;- table(mtcars$cyl)
&gt; barplot(cyl_tbl, xlab=&quot;Cylinders&quot;, ylab=&quot;Count&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-15-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="boxplot" class="slide level2">
<h2>Boxplot</h2>
<pre class="r"><code>&gt; boxplot(mtcars$mpg, ylab=&quot;MPG&quot;, col=&quot;lightgray&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-16-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="constructing-boxplots" class="slide level2">
<h2>Constructing Boxplots</h2>
<ul>
<li>The top of the box is Q3</li>
<li>The line through the middle of the box is the median</li>
<li>The bottom of the box is Q1</li>
<li>The top whisker is the minimum of Q3 + 1.5 <span class="math inline">\(\times\)</span> IQR or the largest data point</li>
<li>The bottom whisker is the maximum of Q1 - 1.5 <span class="math inline">\(\times\)</span> IQR or the smallest data point</li>
<li>Outliers lie outside of (Q1 - 1.5 <span class="math inline">\(\times\)</span> IQR) or (Q3 + 1.5 <span class="math inline">\(\times\)</span> IQR), and they are shown as points</li>
<li>Outliers are calculated using the <code>fivenum()</code> function</li>
</ul>
</section><section id="boxplot-with-outliers" class="slide level2">
<h2>Boxplot with Outliers</h2>
<pre class="r"><code>&gt; boxplot(mtcars$wt, ylab=&quot;Weight (1000 lbs)&quot;, 
+         col=&quot;lightgray&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-17-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="histogram" class="slide level2">
<h2>Histogram</h2>
<pre class="r"><code>&gt; hist(mtcars$mpg, xlab=&quot;MPG&quot;, main=&quot;&quot;, col=&quot;lightgray&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-18-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="histogram-with-more-breaks" class="slide level2">
<h2>Histogram with More Breaks</h2>
<pre class="r"><code>&gt; hist(mtcars$mpg, breaks=12, xlab=&quot;MPG&quot;, main=&quot;&quot;, col=&quot;lightgray&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-19-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="density-plot" class="slide level2">
<h2>Density Plot</h2>
<pre class="r"><code>&gt; plot(density(mtcars$mpg), xlab=&quot;MPG&quot;, main=&quot;&quot;)
&gt; polygon(density(mtcars$mpg), col=&quot;lightgray&quot;, border=&quot;black&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-20-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="boxplot-side-by-side" class="slide level2">
<h2>Boxplot (Side-By-Side)</h2>
<pre class="r"><code>&gt; boxplot(mpg ~ cyl, data=mtcars, xlab=&quot;Cylinders&quot;, 
+         ylab=&quot;MPG&quot;, col=&quot;lightgray&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-21-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="stacked-barplot" class="slide level2">
<h2>Stacked Barplot</h2>
<pre class="r"><code>&gt; counts &lt;- table(mtcars$cyl, mtcars$gear)
&gt; counts
   
     3  4  5
  4  1  8  2
  6  2  4  1
  8 12  0  2</code></pre>
<pre class="r"><code>&gt; barplot(counts, main=&quot;Number of Gears and Cylinders&quot;,
+   xlab=&quot;Gears&quot;, col=c(&quot;blue&quot;,&quot;red&quot;, &quot;lightgray&quot;))
&gt; legend(x=&quot;topright&quot;, title=&quot;Cyl&quot;,
+        legend = rownames(counts), 
+        fill = c(&quot;blue&quot;,&quot;red&quot;, &quot;lightgray&quot;))</code></pre>
</section><section class="slide level2">

<p><img src="week03_files/figure-revealjs/unnamed-chunk-24-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="scatterplot" class="slide level2">
<h2>Scatterplot</h2>
<pre class="r"><code>&gt; plot(mtcars$wt, mtcars$mpg, xlab=&quot;Weight (1000 lbs)&quot;, 
+      ylab=&quot;MPG&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-25-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="a-grammar-of-graphics" class="titleslide slide level1"><h1>A Grammar of Graphics</h1></section><section id="rationale" class="slide level2">
<h2>Rationale</h2>
<p>A grammar for communicating data visualization:</p>
<ul>
<li><em>Data</em>: the data set we are plotting</li>
<li><em>Aesthetics</em>: the variation or relationships in the data we want to visualize</li>
<li><em>Geometries</em>: the geometric object by which we render the aesthetics</li>
<li><em>Coordinates</em>: the coordinate system used (not covered here)</li>
<li><em>Facets</em>: the layout of plots required to visualize the data</li>
<li>Other Options: any other customizations we wish to make, such as changing the color scheme or labels</li>
</ul>
<p>These are strung together like words in a sentence.</p>
</section><section id="package-ggplot2" class="slide level2">
<h2>Package <code>ggplot2</code></h2>
<p>The R package <code>ggplot2</code> implements a grammar of graphics along these lines. First, let’s load <code>ggplot2</code>:</p>
<pre class="r"><code>&gt; library(ggplot2)</code></pre>
<p>Now let’s set a theme (more on this later):</p>
<pre class="r"><code>&gt; theme_set(theme_bw())</code></pre>
</section><section id="pieces-of-the-grammar" class="slide level2">
<h2>Pieces of the Grammar</h2>
<ul>
<li><code>ggplot()</code></li>
<li><code>aes()</code></li>
<li><code>geom_*()</code></li>
<li><code>facet_*()</code></li>
<li><code>scale_*()</code></li>
<li><code>theme()</code></li>
<li><code>labs()</code></li>
</ul>
<p>The <code>*</code> is a placeholder for a variety of terms that we will consider.</p>
</section><section id="geometries" class="slide level2">
<h2>Geometries</h2>
<p>Perhaps the most important aspect of <code>ggplot2</code> is to understand the “geoms”. We will cover the following:</p>
<ul>
<li><code>geom_bar()</code></li>
<li><code>geom_boxplot()</code></li>
<li><code>geom_violin()</code></li>
<li><code>geom_histogram()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_line()</code></li>
<li><code>geom_point()</code></li>
<li><code>geom_smooth()</code></li>
<li><code>geom_hex()</code></li>
</ul>
</section><section id="call-format" class="slide level2">
<h2>Call Format</h2>
<p>The most basic <code>ggplot2</code> plot is made with something like:</p>
<pre><code>ggplot(data = &lt;DATA FRAME&gt;) +
 geom_*(mapping = aes(x = &lt;VAR X&gt;, y = &lt;VAR Y&gt;))</code></pre>
<p>where <code>&lt;DATA FRAME&gt;</code> is a data frame and <code>&lt;VAR X&gt;</code> and <code>&lt;VAR Y&gt;</code> are variables (i.e., columns) from this data frame. Recall <code>geom_*</code> is a placeholder for a geometry such as <code>geom_boxplot</code>.</p>
</section><section id="layers" class="slide level2">
<h2>Layers</h2>
<p>There’s a complex “layers” construct occurring in the <code>ggplot2</code> package. However, for our purposes, it suffices to note that the different parts of the plots are layered together through the <code>+</code> operator:</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, color=drv)) +
+   geom_smooth(mapping = aes(x = displ, y = hwy, color=drv)) + 
+   scale_color_brewer(palette = &quot;Set1&quot;, name = &quot;Drivetrain&quot;) +
+   labs(title = &quot;Highway MPG By Drivetrain and Displacement&quot;, 
+        x = &quot;Displacement&quot;, y = &quot;Highway MPG&quot;)</code></pre>
</section><section id="placement-of-the-aes-call" class="slide level2">
<h2>Placement of the <code>aes()</code> Call</h2>
<p>In the previous slide, we saw that the same <code>aes()</code> call was made for two <code>geom</code>’s. When this is the case, we may more simply call <code>aes()</code> from within <code>ggplot()</code>:</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color=drv)) + 
+   geom_point() +
+   geom_smooth() + 
+   scale_color_brewer(palette = &quot;Set1&quot;, name = &quot;Drivetrain&quot;) +
+   labs(title = &quot;Highway MPG By Drivetrain and Displacement&quot;, 
+        x = &quot;Displacement&quot;, y = &quot;Highway MPG&quot;)</code></pre>
<p>There may be cases where different <code>geom</code>’s are layered and require different <code>aes()</code> calls. This is something to keep in mind as we go through the specifics of the <code>ggplot2</code> package.</p>
</section><section id="original-publications" class="slide level2">
<h2>Original Publications</h2>
<p>Wickham, H. (2010) <a href="http://www.tandfonline.com/doi/abs/10.1198/jcgs.2009.07098">A Layered Grammar of Graphics.</a> <em>Journal of Computational and Graphical Statistics</em>, 19 (1): 3–28.</p>
<p>This paper designs an implementation of <em>The Grammar of Graphics</em> by Leland Wilkinson (published in 2005).</p>
</section><section id="documentation" class="slide level2">
<h2>Documentation</h2>
<ul>
<li>In R: <code>help(package=&quot;ggplot2&quot;)</code></li>
<li><a href="http://docs.ggplot2.org/current/" class="uri">http://docs.ggplot2.org/current/</a></li>
<li><a href="http://www.cookbook-r.com/Graphs/" class="uri">http://www.cookbook-r.com/Graphs/</a></li>
<li><a href="http://amzn.com/0387981403"><em>ggplot2: Elegant Graphics for Data Analysis</em></a> (somewhat outdated, but gives clear rationale)</li>
</ul>
</section></section>
<section><section id="barplots" class="titleslide slide level1"><h1>Barplots</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
The <code>geom_bar()</code> layer forms a barplot and only requires an <code>x</code> assignment in the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-30-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p>Color in the bars by assigning <code>fill</code> in <code>geom_bar()</code>, but outside of <code>aes()</code>:</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut), fill = &quot;tomato&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-31-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p>Color <em>within</em> the bars according to a variable by assigning <code>fill</code> in <code>geom_bar()</code> <em>inside</em> of <code>aes()</code>:</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-32-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
When we use <code>fill = clarity</code> within <code>aes()</code>, we see that it shows the proportion of each <code>clarity</code> value within each <code>cut</code> value:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = clarity))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-33-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
By setting <code>position = &quot;dodge&quot;</code> outside of <code>aes()</code>, it shows bar charts for the <code>clarity</code> values within each <code>cut</code> value:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping= aes(x = cut, fill = clarity), 
+            position = &quot;dodge&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-34-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
By setting <code>position = &quot;fill&quot;</code>, it shows the proportion of <code>clarity</code> values within each <code>cut</code> value and no longer shows the <code>cut</code> values:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping=aes(x = cut, fill = clarity), 
+            position = &quot;fill&quot;) +
+   labs(x = &quot;cut&quot;, y = &quot;relative proporition within cut&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-35-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="boxplots-and-violin-plots" class="titleslide slide level1"><h1>Boxplots and Violin Plots</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
The <code>geom_boxplot()</code> layer forms a boxplot and requires both <code>x</code> and <code>y</code> assignments in the <code>aes()</code> call, even when plotting a single boxplot:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_boxplot(mapping = aes(x = 1, y = hwy))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-36-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Color in the boxes by assigning <code>fill</code> in <code>geom_boxplot()</code>, but outside of <code>aes()</code>:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_boxplot(mapping = aes(x = 1, y = hwy), 
+                fill=&quot;lightblue&quot;) +
+   labs(x=NULL)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-37-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Show a boxplot for the <code>y</code> values occurring within each <code>x</code> factor level by making these assignments in <code>aes()</code>:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_boxplot(mapping = aes(x = factor(cyl), y = hwy))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-38-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
By assigning the <code>fill</code> argument <em>within</em> <code>aes()</code>, we can color each boxplot according to the x-axis factor variable:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_boxplot(mapping = aes(x = factor(cyl), y = hwy, 
+                              fill = factor(cyl)))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-39-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The <code>geom_jitter()</code> function plots the data points and randomly jitters them so we can better see all of the points:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x=factor(cyl), y=hwy)) + 
+   geom_boxplot(fill = &quot;lightblue&quot;) +
+   geom_jitter(width = 0.2)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-40-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
A violin plot, called via <code>geom_violin()</code>, is similar to a boxplot, except shows a density plot turned on its side and reflected across its vertical axis:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_violin(mapping = aes(x = drv, y = hwy))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-41-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Add a <code>geom_jitter()</code> to see how the original data points relate to the violin plots:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x = drv, y = hwy)) + 
+   geom_violin(adjust=1.2) +
+   geom_jitter(width=0.2, alpha=0.5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-42-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Boxplot example on the <code>gapminder</code> data:
</p>
<pre class="r"><code>&gt; ggplot(gapminder, aes(x = continent, y = lifeExp)) +
+   geom_boxplot(outlier.colour = &quot;red&quot;) +
+   geom_jitter(width = 0.1, alpha = 0.25)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-43-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Analogous violin plot example on the <code>gapminder</code> data:
</p>
<pre class="r"><code>&gt; ggplot(gapminder, aes(x = continent, y = lifeExp)) +
+   geom_violin() +
+   geom_jitter(width = 0.1, alpha = 0.25)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-44-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="histograms-and-density-plots" class="titleslide slide level1"><h1>Histograms and Density Plots</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
We can create a histogram using the <code>geom_histogram()</code> layer, which requires an <code>x</code> argument only in the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_histogram(mapping = aes(x=lifeExp))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-45-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
We can change the bin width directly in the histogram, which is an intuitive parameter to change based on visual inspection:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_histogram(mapping = aes(x=lifeExp), binwidth=5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-46-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The bins are sometimes centered in an unexpected manner in <code>ggplot2</code>:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) +
+   geom_histogram(mapping = aes(x=price), binwidth = 1000)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-47-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Let’s fix how the bins are centered (make <code>center</code> half of <code>binwidth</code>).
</p>
<pre class="r"><code>&gt; ggplot(diamonds) +
+   geom_histogram(mapping = aes(x=price), binwidth = 1000, 
+                  center=500)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-48-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Instead of counts on the y-axis, we may instead want the area of the bars to sum to 1, like a probability density:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_histogram(mapping = aes(x=lifeExp, y=..density..), 
+                  binwidth=5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-49-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
When we use <code>fill = continent</code> within <code>aes()</code>, we see that it shows the counts of each <code>continent</code> value within each <code>lifeExp</code> bin:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_histogram(mapping = aes(x=lifeExp, fill = continent), 
+                  binwidth = 5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-50-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Display a density plot using the <code>geom_density()</code> layer:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_density(mapping = aes(x=lifeExp))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-51-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Employ the arguments <code>color=&quot;blue&quot;</code> and <code>fill=&quot;lightblue&quot;</code> outside of the <code>aes()</code> call to include some colors:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_density(mapping = aes(x=lifeExp), color=&quot;blue&quot;, 
+                fill=&quot;lightblue&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-52-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
By utilizing <code>color=as.factor(year)</code> we plot a density of <code>lifeExp</code> stratified by each <code>year</code> value:
</p>
<pre class="r"><code>&gt; ggplot(gapminder) +
+   geom_density(aes(x=lifeExp, color=as.factor(year)), 
+                size=1.2)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-53-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Overlay a density plot and a histogram together:
</p>
<pre class="r"><code>&gt; ggplot(gapminder, mapping = aes(x=lifeExp)) + 
+   geom_histogram(aes(y=..density..), color=&quot;black&quot;, 
+                  fill=&quot;white&quot;) +
+   geom_density(fill=&quot;lightblue&quot;, alpha=.5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-54-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="line-plots" class="titleslide slide level1"><h1>Line Plots</h1></section><section class="slide level2">

<h2>
<code>babynames</code> Revisited
</h2>
<p>Let’s first create a data frame that captures the number of times “John” is registered in males per year:</p>
<pre class="r"><code>&gt; library(&quot;babynames&quot;)
&gt; john &lt;- babynames %&gt;% filter(sex==&quot;M&quot;, name==&quot;John&quot;)
&gt; head(john)
# A tibble: 6 × 5
   year   sex  name     n       prop
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;
1  1880     M  John  9655 0.08154630
2  1881     M  John  8769 0.08098299
3  1882     M  John  9557 0.07831617
4  1883     M  John  8894 0.07907324
5  1884     M  John  9388 0.07648751
6  1885     M  John  8756 0.07551791</code></pre>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
We can <code>geom_lines()</code> to plot a line showing the popularity of “John” over time:
</p>
<pre class="r"><code>&gt; ggplot(data = john) + 
+   geom_line(mapping = aes(x=year, y=prop), size=1.5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-56-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Now let’s look at a name that occurs nontrivially in males and females:
</p>
<pre class="r"><code>&gt; kelly &lt;- babynames %&gt;% filter(name==&quot;Kelly&quot;)
&gt; ggplot(data = kelly) + 
+   geom_line(mapping = aes(x=year, y=prop, color=sex), 
+             size=1.5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-57-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="scatterplots" class="titleslide slide level1"><h1>Scatterplots</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
The layer <code>geom_point()</code> produces a scatterplot, and the <code>aes()</code> call requires <code>x</code> and <code>y</code> assignment:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-58-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Give the points a color:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy), 
+              color = &quot;blue&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-59-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Color the points according to a factor variable by including <code>color = class</code> within the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, 
+                            color = class))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-60-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Increase the size of points with <code>size=2</code> outside of the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, 
+                            color = class), size=2)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-61-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Vary the size of the points according to the <code>pop</code> variable:
</p>
<pre class="r"><code>&gt; gapminder %&gt;% filter(year==2007) %&gt;% ggplot() + 
+   geom_point(aes(x = log(gdpPercap), y = lifeExp, 
+                  size = pop))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-62-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Vary the transparency of the points according to the <code>class</code> factor variable by setting <code>alpha=class</code> within the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, 
+                            alpha = class))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-63-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Vary the shape of the points according to the <code>class</code> factor variable by setting <code>alpha=class</code> within the <code>aes()</code> call (maximum 6 possible shapes – oops!):
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, 
+                            shape = class))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-64-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Color the points according to the <code>cut</code> variable by setting <code>color=cut</code> within the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) +
+   geom_point(mapping = aes(x=carat, y=price, color=cut),
+              alpha=0.7)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-65-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Color the points according to the <code>clarity</code> variable by setting <code>color=clarity</code> within the <code>aes()</code> call:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) +
+   geom_point(mapping=aes(x=carat, y=price, color=clarity), 
+              alpha=0.3)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-66-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Override the <code>alpha=0.3</code> in the legend:
</p>
<pre class="r"><code>&gt; ggplot(data=diamonds) +
+   geom_point(mapping=aes(x=carat, y=price, color=clarity), 
+              alpha=0.3) + 
+   guides(color=guide_legend(override.aes = list(alpha = 1)))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-67-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="axis-scales" class="titleslide slide level1"><h1>Axis Scales</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
A different way to take the log of <code>gdpPercap</code>:
</p>
<pre class="r"><code>&gt; gapminder %&gt;% filter(year==2007) %&gt;% ggplot() + 
+   geom_point(aes(x = gdpPercap, y = lifeExp, 
+                  size = pop)) +
+   scale_x_log10()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-68-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The <code>price</code> variable seems to be significantly right-skewed:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_boxplot(aes(x=color, y=price)) </code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-69-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
We can try to reduce this skewness by rescaling the variables. We first try to take the <code>log(base=10)</code> of the <code>price</code> variable via <code>scale_y_log10()</code>:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_boxplot(aes(x=color, y=price)) + 
+   scale_y_log10()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-70-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Let’s repeat this on the analogous violing plots:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_violin(aes(x=color, y=price)) + 
+   scale_y_log10()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-71-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The relationship between <code>carat</code> and <code>price</code> is nonlinear. Let’s explore different transformations to find an approximately linear relationship.
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) +
+   geom_point(mapping=aes(x=carat, y=price, color=clarity), 
+              alpha=0.3)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-72-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
First try to take the squareroot of the the <code>price</code> variable:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) +
+   geom_point(aes(x=carat, y=price, color=clarity), 
+              alpha=0.3) +
+   scale_y_sqrt()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-73-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Now let’s try to take <code>log(base=10)</code> on both the <code>carat</code> and <code>price</code> variables:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) +
+   geom_point(aes(x=carat, y=price, color=clarity), alpha=0.3) +
+   scale_y_log10(breaks=c(1000,5000,10000)) + 
+   scale_x_log10(breaks=1:5)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-74-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Forming a violin plot of <code>price</code> stratified by <code>clarity</code> and transforming the <code>price</code> variable yields an interesting relationship in this data set:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_violin(aes(x=clarity, y=price, fill=clarity), 
+               adjust=1.5) +  
+   scale_y_log10()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-75-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="scatterplot-smoothers" class="titleslide slide level1"><h1>Scatterplot Smoothers</h1></section><section class="slide level2">

<h2>
Fitting “Smoothers” and Other Models to Scatterplots
</h2>
<ul>
<li>Later this semester, we will spend several weeks learning how to explain or predict an outcome variable in terms of predictor variables<br />
</li>
<li>We will briefly show here how to plot some simple model fits to scatterplots</li>
<li>You may want to return to these slides later in the semester once we cover modeling in more detail</li>
</ul>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Recall the scatterplot showing the relationship between highway mpg and displacement. How can we plot a smoothed relationship between these two variables?
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-76-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Plot a smoother with <code>geom_smooth()</code> using the default settings (other than removing the error bands):
</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
+   geom_point() + 
+   geom_smooth(se=FALSE)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-77-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The default smoother here is a “loess” smoother. Let’s compare that to the least squares regresson line:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
+   geom_point() + 
+   geom_smooth(aes(colour = &quot;loess&quot;), method = &quot;loess&quot;, se = FALSE) + 
+   geom_smooth(aes(colour = &quot;lm&quot;), method = &quot;lm&quot;, se = FALSE)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-78-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Now let’s plot a smoother to the points stratified by the <code>drv</code> variable:
</p>
<pre class="r"><code>&gt; ggplot(data=mpg, mapping = aes(x = displ, y = hwy, 
+                                linetype = drv)) + 
+   geom_point() + 
+   geom_smooth(se=FALSE)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-79-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Instead of different line types, let’s instead differentiate them by line color:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x = displ, y = hwy, 
+                                  color=drv)) + 
+   geom_point() +
+   geom_smooth(se=FALSE)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-80-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="overplotting" class="titleslide slide level1"><h1>Overplotting</h1></section><section class="slide level2">

<h2>
Definition
</h2>
<ul>
<li>Overplotting occurs when there are many observations, resulting in many objects being plotted on top of each other</li>
<li>For example, the <code>diamonds</code> data set has 53940 observations per variable</li>
<li>Let’s explore some ways to deal with overplotting</li>
</ul>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Here is an example of an overplotted scatterplot:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds, mapping = aes(x=carat, y=price)) +
+   geom_point()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-81-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Let’s reduce the <code>alpha</code> of the points:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds, mapping = aes(x=carat, y=price)) +
+   geom_point(alpha=0.1)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-82-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Let’s further reduce the <code>alpha</code>:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds, mapping = aes(x=carat, y=price)) +
+   geom_point(alpha=0.01)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-83-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
We can bin the points into hexagons, and report how many points fall within each bin. We use the <code>geom_hex()</code> layer to do this:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds, mapping = aes(x=carat, y=price)) +
+   geom_hex()</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-84-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Let’s try to improve the color scheme:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds, mapping = aes(x=carat, y=price)) +
+   geom_hex() + 
+   scale_fill_gradient2(low=&quot;lightblue&quot;, mid=&quot;purple&quot;, high=&quot;black&quot;, 
+                        midpoint=3000)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-85-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
We can combine the scale transformation used earlier with the “hexbin” plotting method:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds, mapping = aes(x=carat, y=price)) +
+   geom_hex(bins=20) +
+   scale_x_log10(breaks=1:5) + scale_y_log10(breaks=c(1000,5000,10000)) </code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-86-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="labels-and-legends" class="titleslide slide level1"><h1>Labels and Legends</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
Here’s how you can change the axis labels and give the plot a title:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_boxplot(mapping = aes(x = factor(cyl), y = hwy)) +
+   labs(title=&quot;Highway MPG by Cylinders&quot;,x=&quot;Cylinders&quot;,
+        y=&quot;Highway MPG&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-87-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
You can remove the legend to a plot by the following:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut)) +
+   theme(legend.position=&quot;none&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-88-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The legend can be placed on the “top”, “bottom”, “left”, or “right”:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut)) +
+   theme(legend.position=&quot;bottom&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-89-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The legend can be moved inside the plot itself:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut)) +
+   theme(legend.position=c(0.15,0.75))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-90-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Change the name of the legend:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut)) +
+   scale_fill_discrete(name=&quot;Diamond\nCut&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-91-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Change the labels within the legend:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut)) +
+   scale_fill_discrete(labels=c(&quot;F&quot;, &quot;G&quot;, &quot;VG&quot;, &quot;P&quot;, &quot;I&quot;))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-92-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="facets" class="titleslide slide level1"><h1>Facets</h1></section><section class="slide level2">

<p style="font-size: 0.75em;">
Here is the histogram of the <code>displ</code> variable from the <code>mpg</code> data set:
</p>
<pre class="r"><code>&gt; ggplot(mpg) + geom_histogram(mapping=aes(x=displ), 
+                              binwidth=0.25)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-93-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The <code>facet_wrap()</code> layer allows us to stratify the <code>displ</code> variable according to <code>cyl</code>, and show the histograms for the strata in an organized fashion:
</p>
<pre class="r"><code>&gt; ggplot(mpg) + 
+   geom_histogram(mapping=aes(x=displ), binwidth=0.25) + 
+   facet_wrap(~ cyl)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-94-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Here is <code>facet_wrap()</code> applied to <code>displ</code> startified by the <code>drv</code> variable:
</p>
<pre class="r"><code>&gt; ggplot(mpg) + 
+   geom_histogram(mapping=aes(x=displ), binwidth=0.25) + 
+   facet_wrap(~ drv)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-95-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
We can stratify by two variable simultaneously by using the <code>facet_grid()</code> layer:
</p>
<pre class="r"><code>&gt; ggplot(mpg) + 
+   geom_histogram(mapping=aes(x=displ), binwidth=0.25) + 
+   facet_grid(drv ~ cyl)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-96-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Let’s carry out a similar faceting on the <code>diamonds</code> data over the next four plots:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_histogram(mapping=aes(x=price), binwidth=500)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-97-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Stratify <code>price</code> by <code>clarity</code>:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_histogram(mapping=aes(x=price), binwidth=500) + 
+   facet_wrap(~ clarity)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-98-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Stratify <code>price</code> by <code>clarity</code>, but allow each y-axis range to be different by including the <code>scale=&quot;free_y&quot;</code> argument:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_histogram(mapping=aes(x=price), binwidth=500) + 
+   facet_wrap(~ clarity, scale=&quot;free_y&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-99-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Jointly stratify <code>price</code> by <code>cut</code> and <code>clarify</code>:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) + 
+   geom_histogram(mapping=aes(x=price), binwidth=500) + 
+   facet_grid(cut ~ clarity) +
+   scale_x_continuous(breaks=9000)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-100-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="colors" class="titleslide slide level1"><h1>Colors</h1></section><section id="finding-colors" class="slide level2">
<h2>Finding Colors</h2>
<ul>
<li><a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">A list</a> of named colors in R (e.g., “lightblue”)</li>
<li><a href="https://cran.r-project.org/web/packages/RColorBrewer/index.html">RColorBrewer</a> package</li>
<li>The Crayola crayon colors from the <a href="https://cran.r-project.org/web/packages/broman/index.html"><code>broman</code></a> package – use <code>brocolors(set=&quot;crayons&quot;)</code></li>
<li><a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/">Color blind palette</a>:</li>
</ul>
<pre class="r"><code>&gt; cbPalette &lt;- c(&quot;#999999&quot;, &quot;#E69F00&quot;, &quot;#56B4E9&quot;, &quot;#009E73&quot;, &quot;#F0E442&quot;, &quot;#0072B2&quot;, 
+                &quot;#D55E00&quot;, &quot;#CC79A7&quot;)</code></pre>
</section><section id="some-useful-layers" class="slide level2">
<h2>Some Useful Layers</h2>
<ul>
<li><code>scale_fill_manual()</code></li>
<li><code>scale_color_manual()</code></li>
<li><code>scale_fill_gradient()</code></li>
<li><code>scale_color_gradient()</code></li>
</ul>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Manually determine colors to fill the barplot using the color blind palette defined above, <code>cbPalette</code>:
</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut, fill = cut)) +
+   scale_fill_manual(values=cbPalette)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-102-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Manually determine point colors using the color blind palette defined above, <code>cbPalette</code>:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, color = class), size=2) +
+   scale_color_manual(values=cbPalette)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-103-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Fill the histogram bars using a color gradient by their counts, where we determine the endpoint colors:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_histogram(aes(x=hwy, fill=..count..)) + 
+   scale_fill_gradient(low=&quot;blue&quot;, high=&quot;red&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-104-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Color the points based on a gradient formed from the quantitative variable, <code>displ</code>, where we we determine the endpoint colors:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(aes(x=hwy, y=cty, color=displ), size=2) + 
+   scale_color_gradient(low=&quot;blue&quot;, high=&quot;red&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-105-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
An example of using the palette “Set1” from the <code>RColorBrewer</code> package, included in <code>ggplot2</code>:
</p>
<pre class="r"><code>&gt; ggplot(diamonds) +
+   geom_density(mapping = aes(x=price, color=clarity)) +
+   scale_color_brewer(palette = &quot;Set1&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-106-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
Another example of using the palette “Set1” from the <code>RColorBrewer</code> package, included in <code>ggplot2</code>:
</p>
<pre class="r"><code>&gt; ggplot(data = mpg) + 
+   geom_point(mapping = aes(x = displ, y = hwy, color = class)) +
+   scale_color_brewer(palette = &quot;Set1&quot;)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-107-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<p style="font-size: 0.75em;">
The <code>gapminder</code> package comes with its own set of colors, <code>country_colors</code>.
</p>
<pre class="r"><code>&gt; ggplot(subset(gapminder, continent != &quot;Oceania&quot;),
+        aes(x = year, y = lifeExp, group = country, 
+            color = country)) +
+   geom_line(show.legend = FALSE) + facet_wrap(~ continent) +
+   scale_color_manual(values = country_colors)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-108-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="saving-plots" class="titleslide slide level1"><h1>Saving Plots</h1></section><section id="saving-plots-as-variables" class="slide level2">
<h2>Saving Plots as Variables</h2>
<p>Pieces of the plots can be saved as variables, which is particular useful to explortatory data analysis. These all produce the same plot:</p>
<pre class="r"><code>&gt; ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color=drv)) + 
+   geom_point() +
+   geom_smooth(se=FALSE)</code></pre>
<pre class="r"><code>&gt; p &lt;- ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color=drv)) +  
+   geom_point() 
&gt; p + geom_smooth(se=FALSE)</code></pre>
<pre class="r"><code>&gt; p &lt;- ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color=drv)) 
&gt; p +  geom_point() + geom_smooth(se=FALSE)</code></pre>
<p>Try it yourself!</p>
</section><section id="saving-plots-to-files" class="slide level2">
<h2>Saving Plots to Files</h2>
<p>Plots can be saved to many formats using the <code>ggsave()</code> function. Here are some examples:</p>
<pre class="r"><code>&gt; p &lt;- ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color=drv)) + 
+   geom_point() +
+   geom_smooth(se=FALSE)
&gt; ggsave(filename=&quot;my_plot.pdf&quot;, plot=p) # saves PDF file
&gt; ggsave(filename=&quot;my_plot.png&quot;, plot=p) # saves PNG file</code></pre>
<p>Here are the arguments that <code>ggsave()</code> takes:</p>
<pre class="r"><code>&gt; str(ggsave)
function (filename, plot = last_plot(), device = NULL, 
    path = NULL, scale = 1, width = NA, height = NA, units = c(&quot;in&quot;, 
        &quot;cm&quot;, &quot;mm&quot;), dpi = 300, limitsize = TRUE, ...)  </code></pre>
</section></section>
<section><section id="dynamic-visualization" class="titleslide slide level1"><h1>Dynamic Visualization</h1></section><section id="examples" class="slide level2">
<h2>Examples</h2>
<p>Tools to dynamically interact with data visualizations (and calculations) are becoming increasingly common and straightforward to implement. Here are several examples:</p>
<ul>
<li><a href="https://shiny.rstudio.com">Shiny</a> (see also, <a href="http://qvalue.princeton.edu">example from my lab</a>)</li>
<li><a href="https://plot.ly/r/">plotly</a></li>
<li><a href="http://ggvis.rstudio.com">ggvis</a></li>
<li><a href="https://cran.r-project.org/web/packages/animation/index.html">animation</a></li>
<li><a href="https://github.com/dgrtwo/gganimate">gganimate</a></li>
</ul>
</section><section class="slide level2">

<pre class="r"><code>&gt; p &lt;- ggplot(gapminder) +
+         geom_point(aes(x=gdpPercap, y=lifeExp, size = pop, 
+                    color = continent, frame = year)) +
+         scale_x_log10()
&gt; gganimate(p, &quot;animation_ex1.gif&quot;, ani.height=400, ani.width=500)</code></pre>
<p>The resulting file can be viewed here: <a href="https://raw.githubusercontent.com/jdstorey/asdslectures/master/docs/images/animation_ex1.gif">https://github.com/jdstorey/asdslectures/blob/master/docs/images/animation_ex1.gif</a></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; p &lt;- ggplot(gapminder) +
+   geom_density(aes(x=lifeExp, color=as.factor(year), 
+                    frame=year), 
+                size=1.2) +
+   scale_color_discrete(name=&quot;year&quot;)
&gt; gganimate(p, &quot;animation_ex2.gif&quot;, ani.height=400, ani.width=500)</code></pre>
<p>The resulting file can be viewed here: <a href="https://raw.githubusercontent.com/jdstorey/asdslectures/master/docs/images/animation_ex2.gif">https://github.com/jdstorey/asdslectures/blob/master/docs/images/animation_ex2.gif</a></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; p &lt;- ggplot(gapminder) +
+   geom_density(aes(x=lifeExp, color=as.factor(year), 
+                    frame=year, cumulative = TRUE), 
+                size=1.2) +
+   scale_color_discrete(name=&quot;year&quot;)
&gt; gganimate(p, &quot;animation_ex3.gif&quot;, ani.height=400, ani.width=500)</code></pre>
<p>The resulting file can be viewed here: <a href="https://raw.githubusercontent.com/jdstorey/asdslectures/master/docs/images/animation_ex3.gif">https://github.com/jdstorey/asdslectures/blob/master/docs/images/animation_ex3.gif</a></p>
</section></section>
<section><section id="themes" class="titleslide slide level1"><h1>Themes</h1></section><section id="available-themes" class="slide level2">
<h2>Available Themes</h2>
<center>
<img src="images/visualization-themes.png" alt="themes" />
</center>
<p style="font-size: 0.75em;">
From <a href="http://r4ds.had.co.nz/visualize.html" class="uri">http://r4ds.had.co.nz/visualize.html</a>. See also <a href="https://cran.r-project.org/web/packages/ggthemes/index.html"><code>ggthemes</code></a> package.
</p>
</section><section id="setting-a-theme" class="slide level2">
<h2>Setting a Theme</h2>
<p>Globally:</p>
<pre class="r"><code>&gt; theme_set(theme_minimal())</code></pre>
<p>Locally:</p>
<pre class="r"><code>&gt; ggplot(data = diamonds) + 
+   geom_bar(mapping = aes(x = cut)) + 
+   theme_minimal()</code></pre>
</section></section>
<section><section id="more-numerical-summaries" class="titleslide slide level1"><h1>More Numerical Summaries</h1></section><section id="measuring-symmetry" class="slide level2">
<h2>Measuring Symmetry</h2>
<p>The <strong>skewness</strong> statistic measures symmetry of the data. It is calculated by:</p>
<p><span class="math display">\[
\gamma = \frac{\sum_{i=1}^n (x_i - \overline{x})^3/n}{s^3}
\]</span></p>
<p>A negative number is left-skewed, and a positive number is right-skewed.</p>
<p>Note: Use of <span class="math inline">\(n\)</span> vs. <span class="math inline">\(n-1\)</span> may vary – check the code.</p>
</section><section id="skewness-function" class="slide level2">
<h2><code>skewness()</code> Function</h2>
<p>In R, there is a function call <code>skewness()</code> from the <code>moments</code> package for calculating this statistic on data.</p>
<pre class="r"><code>&gt; library(moments)
&gt; gapminder %&gt;% filter(year==2007) %&gt;% select(gdpPercap) %&gt;% 
+   skewness()
gdpPercap 
 1.211228 
&gt; gapminder %&gt;% filter(year==2007) %&gt;% select(gdpPercap) %&gt;% 
+   log() %&gt;% skewness()
 gdpPercap 
-0.1524203 
&gt; rnorm(10000) %&gt;% skewness()
[1] -0.01402231</code></pre>
</section><section id="measuring-tails" class="slide level2">
<h2>Measuring Tails</h2>
<p>The tails of a distribution are often described as being heavy or light depending on how slowly they descend.</p>
<p>This can be measured through statistic called <strong>kurtosis</strong>:</p>
<p><span class="math display">\[
\kappa = \frac{\sum_{i=1}^n (x_i - \overline{x})^4/n}{s^4}
\]</span> As with skewness <span class="math inline">\(\gamma\)</span>, use of <span class="math inline">\(n\)</span> vs <span class="math inline">\(n-1\)</span> may vary.</p>
</section><section id="excess-kurtosis" class="slide level2">
<h2>Excess Kurtosis</h2>
<p>For a standard Normal distribution (mean 0 and standard deviation 1), the kurtosis is on average 3.</p>
<p>Therefore, a measure called “excess kurtosis” is defined to be <span class="math inline">\(\kappa - 3\)</span>. A positive value implies heavier tails and a negative value implies lighter tails.</p>
</section><section id="kurtosis-function" class="slide level2">
<h2><code>kurtosis()</code> Function</h2>
<p>In R, there is a function call <code>kurtosis()</code> from the <code>moments</code> package for calculating this statistic on data.</p>
<pre class="r"><code>&gt; library(moments)
&gt; gapminder %&gt;% filter(year==2007) %&gt;% select(gdpPercap) %&gt;% 
+   kurtosis()
gdpPercap 
  3.29593 
&gt; gapminder %&gt;% filter(year==2007) %&gt;% select(gdpPercap) %&gt;% 
+   log() %&gt;% kurtosis()
gdpPercap 
 1.871608 
&gt; rnorm(10000) %&gt;% kurtosis()
[1] 2.99372</code></pre>
</section><section id="visualizing-skewness-and-kurtosis" class="slide level2">
<h2>Visualizing Skewness and Kurtosis</h2>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-118-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="visualizing-skewness-and-kurtosis-1" class="slide level2">
<h2>Visualizing Skewness and Kurtosis</h2>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-119-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section id="correlation" class="slide level2">
<h2>Correlation</h2>
<ul>
<li><p>It is often the case that two or more quantitative variables are measured on each unit of observation (such as an individual).</p></li>
<li><p>We are then often interested in characterizing how pairs of variables are associated or how they vary together.</p></li>
<li><p>A common measure that is used is called “correlation”, which is most well suited for measuring linear associations</p></li>
</ul>
</section><section id="pearson-correlation" class="slide level2">
<h2>Pearson Correlation</h2>
<p>Suppose we observe <span class="math inline">\(n\)</span> pairs of data <span class="math inline">\((x_1, y_1), (x_2, y_2), \ldots, (x_n, y_n)\)</span>. Their sample correlation is</p>
<span class="math display">\[\begin{eqnarray}
r_{xy} &amp; = &amp; \frac{\sum_{i=1}^n (x_i - \overline{x}) (y_i - \overline{y})}{\sqrt{\sum_{i=1}^n (x_i - \overline{x})^2 \sum_{i=1}^n (y_i - \overline{y})^2}} \\
\ &amp; = &amp; \frac{\sum_{i=1}^n (x_i - \overline{x}) (y_i - \overline{y})}{(n-1) s_x s_y}
\end{eqnarray}\]</span>
<p>where <span class="math inline">\(s_x\)</span> and <span class="math inline">\(s_y\)</span> are the sample standard deviations of each measured variable.</p>
</section><section id="spearman-correlation" class="slide level2">
<h2>Spearman Correlation</h2>
<ul>
<li><p>There are other ways to measure correlation that are less reliant on linear trends in covariation and are also more robust to outliers.</p></li>
<li><p>Specifically, one can convert each measured variable to ranks by size (1 for the smallest, <span class="math inline">\(n\)</span> for the largest) and then use a formula for correlation designed for these ranks.</p></li>
<li><p>One popular measure of rank-based correlation is the <a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">Spearman correlation</a>.</p></li>
</ul>
</section><section class="slide level2">

<pre class="r"><code>&gt; x &lt;- rnorm(500)
&gt; y &lt;- x + rnorm(500)
&gt; cor(x, y, method=&quot;pearson&quot;)
[1] 0.7542651
&gt; cor(x, y, method=&quot;spearman&quot;)
[1] 0.7499555</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-122-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; x &lt;- rnorm(500)
&gt; y &lt;- x + rnorm(500, sd=2)
&gt; cor(x, y, method=&quot;pearson&quot;)
[1] 0.5164903
&gt; cor(x, y, method=&quot;spearman&quot;)
[1] 0.5093092</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-125-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; x &lt;- c(rnorm(499), 100)
&gt; y &lt;- c(rnorm(499), 100)
&gt; cor(x, y, method=&quot;pearson&quot;)
[1] 0.9528564
&gt; cor(x, y, method=&quot;spearman&quot;)
[1] -0.02133551</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-128-1.png" width="960" style="display: block; margin: auto;" /></p>
</section><section id="quantile-quantile-plots" class="slide level2">
<h2>Quantile-Quantile Plots</h2>
<p>Quantile-quantile plots display the <a href="#//quantiles-and-percentiles">quantiles</a> of:</p>
<ol type="1">
<li>two samples of data</li>
<li>a sample of data vs a theoretical distribution</li>
</ol>
<p>The first type allows one to assess how similar the distributions are of two samples of data.</p>
<p>The second allows one to assess how similar a sample of data is to a theoretical distribution (often Normal with mean 0 and standard deviation 1).</p>
</section><section class="slide level2">

<pre class="r"><code>&gt; qqnorm(mtcars$mpg, main=&quot; &quot;)
&gt; qqline(mtcars$mpg) # line through Q1 and Q3</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-129-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; before1980 &lt;- gapminder %&gt;% filter(year &lt; 1980) %&gt;% 
+   select(lifeExp) %&gt;% unlist()
&gt; after1980 &lt;- gapminder %&gt;% filter(year &gt; 1980) %&gt;% 
+   select(lifeExp) %&gt;% unlist()
&gt; qqplot(before1980, after1980); abline(0,1)</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-130-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; ggplot(mtcars) + stat_qq(aes(sample = mpg))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-131-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; ggplot(gapminder) + stat_qq(aes(sample=lifeExp))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-132-1.png" width="576" style="display: block; margin: auto;" /></p>
</section><section class="slide level2">

<pre class="r"><code>&gt; ggplot(gapminder) + 
+   stat_qq(aes(sample=lifeExp, color=continent))</code></pre>
<p><img src="week03_files/figure-revealjs/unnamed-chunk-133-1.png" width="576" style="display: block; margin: auto;" /></p>
</section></section>
<section><section id="extras" class="titleslide slide level1"><h1>Extras</h1></section><section id="source" class="slide level2">
<h2>Source</h2>
<p><a href="https://github.com/jdstorey/asdslectures/blob/master/LICENSE.md">License</a></p>
<p><a href="https://github.com/jdstorey/asdslectures/">Source Code</a></p>
</section><section id="session-information" class="slide level2">
<h2>Session Information</h2>
<section style="font-size: 0.75em;">
<pre class="r"><code>&gt; sessionInfo()
R version 3.3.2 (2016-10-31)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: macOS Sierra 10.12.4

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods  
[7] base     

other attached packages:
 [1] moments_0.14         hexbin_1.27.1       
 [3] babynames_0.3.0      gapminder_0.2.0     
 [5] gganimate_0.1.0.9000 animation_2.5       
 [7] dplyr_0.5.0          purrr_0.2.2         
 [9] readr_1.1.0          tidyr_0.6.2         
[11] tibble_1.3.0         ggplot2_2.2.1       
[13] tidyverse_1.1.1      knitr_1.15.1        
[15] magrittr_1.5         devtools_1.12.0     

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.10       RColorBrewer_1.1-2 highr_0.6         
 [4] cellranger_1.1.0   plyr_1.8.4         forcats_0.2.0     
 [7] tools_3.3.2        digest_0.6.12      lubridate_1.6.0   
[10] jsonlite_1.4       evaluate_0.10      memoise_1.1.0     
[13] nlme_3.1-131       gtable_0.2.0       lattice_0.20-35   
[16] psych_1.7.5        DBI_0.6-1          yaml_2.1.14       
[19] parallel_3.3.2     haven_1.0.0        xml2_1.1.1        
[22] withr_1.0.2        stringr_1.2.0      httr_1.2.1        
[25] revealjs_0.9       hms_0.3            rprojroot_1.2     
[28] grid_3.3.2         R6_2.2.0           readxl_1.0.0      
[31] foreign_0.8-68     rmarkdown_1.5      modelr_0.1.0      
[34] reshape2_1.4.2     backports_1.0.5    scales_0.4.1      
[37] htmltools_0.3.6    rvest_0.3.2        assertthat_0.2.0  
[40] mnormt_1.5-5       colorspace_1.3-2   labeling_0.3      
[43] stringi_1.1.5      lazyeval_0.2.0     munsell_0.4.3     
[46] broom_0.4.2       </code></pre>
</section>
</section></section>
    </div>
  </div>

  <script src="libs/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="libs/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: false,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: true,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        chalkboard: {
        },

        keyboard: {
          67: function() { RevealChalkboard.toggleNotesCanvas() },    // toggle notes canvas when 'c' is pressed
          66: function() { RevealChalkboard.toggleChalkboard() }, // toggle chalkboard when 'b' is pressed
          46: function() { RevealChalkboard.clear() },    // clear chalkboard when 'DEL' is pressed
           8: function() { RevealChalkboard.reset() },    // reset chalkboard data on current slide when 'BACKSPACE' is pressed
          68: function() { RevealChalkboard.download() }, // downlad recorded chalkboard drawing when 'd' is pressed
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: 'libs/reveal.js-3.3.0.1/plugin/zoom-js/zoom.js', async: true },
          { src: 'libs/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js', async: true },
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
